package com.ee.qa.util;

import java.util.List;
import java.util.Set;

import org.openqa.selenium.By;
import org.openqa.selenium.NoAlertPresentException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

import com.ee.qa.base.TestBase;

public class TestUtil extends TestBase {
	
	public static long PAGE_LOAD_TIMEOUT = 20;
	public static long IMPLICIT_Wait = 18;
	
	
	public void switchToFrame(){
		
		driver.switchTo().frame("iframe-for-3rd-party");
	}
	
	public void switchToIFrameError() {
		
		driver.switchTo().frame("iframe-error-container");
	}
	
	public boolean isAlertPresent() {
	    try {
	      driver.switchTo().alert();
	      return true;
	    } catch (NoAlertPresentException e) {
	      return false;
	    }
	  }
	
	
	public void Sleep() {
		try {
			Thread.sleep(3000);
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
	}
	
	
	public void windowsHandler() {
		
	
		String parentWindow = driver.getWindowHandle();
		Set<String> handles =  driver.getWindowHandles();
		   for(String windowHandle  : handles)
		       {
		       if(!windowHandle.equals(parentWindow))
		          {
		          driver.switchTo().window(windowHandle);
		          
		 
					          
		          }                                                                                                                               
		       
		       
		       }
	}

	public void datePicker()
	{
		String dot="20/November/2021";
		String dot1=prop.getProperty("CheckinDate");
		String date,month,year;
		String caldt,calmonth,calyear;
		/*
		* Spliting the String into String Array
		*/
		String dateArray[]= dot.split("/");
		date=dateArray[0];
		month=dateArray[1];
		year=dateArray[2];



		WebElement cal;
		cal=driver.findElement(By.className("calendar"));
		calyear=driver.findElement(By.className("ui-datepicker-year")).getText();
		/**
		* Select the year
		*/
		while (!calyear.equals(year)) 
		{
		driver.findElement(By.className("nextMonth")).click();
		calyear=driver.findElement(By.className("ui-datepicker-year")).getText();
		System.out.println("The Displayed Year::" + calyear);
		}

		calmonth=driver.findElement(By.className("ui-datepicker-month")).getText();
		/**
		* Select the Month
		*/
		while (!calmonth.equalsIgnoreCase(month)) 
		{
		driver.findElement(By.className("nextMonth ")).click();
		calmonth=driver.findElement(By.className("ui-datepicker-month")).getText();
		}

		cal=driver.findElement(By.className("calendar"));
		/**
		* Select the Date
		*/
		List<WebElement> rows,cols;
		rows=cal.findElements(By.tagName("tr"));
		for (int i = 1; i < rows.size(); i++) 
		{
		cols=rows.get(i).findElements(By.tagName("td"));
		for (int k = 0; k < cols.size(); k++) 
		{
		caldt=cols.get(k).getText();
		if (caldt.equals(date)) 
		{
		cols.get(k).click();
		break;
		}
		}
		}

	}
}
